@using PersonalSite.Disqus
@inject NavigationManager NavigationManager

<div class="px-3 @(HasPadding ? "py-lg-5" : string.Empty)">
    <div class="row ">
            <div class="col-12 col-xl-8 mx-auto p-3 @(HasPadding ? "py-md-5" : string.Empty)">
                <h1 class="post-title">@Title</h1>
                @if(Subtitle is not null) {
                     <h2 class="post-subtitle">@Subtitle</h2>
                }
                <div class="post-line"></div>

                <div class="post-info">
                    <div class="d-flex justify-content-between">
                        <span class="mb-2">
                            @if(Author is not null) 
                            {
                                @Author <text> • </text>
                            }
                            <time
                                datetime="@Published.ToString("yyyy-MM-dd")">@Published.ToString("dddd, dd MMMM")</time>
                            @if(EstimatedTime is not null) 
                            {
                                <text> • </text> <ReadTimeEstimateDiplay EstimatedTime="@EstimatedTime.GetValueOrDefault()" />
                            }
                        </span>
                        <div>
                            <CommentCount Url="@NavigationManager.Uri" />
                        </div>
                    </div>
                    <div class="mt-2">
                        @if(Tags is not null) 
                        {
                            @foreach (var tag in Tags)
                            {
                                <span class="badge rounded-pill bg-secondary me-2 mb-1">@tag</span>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
        </div>

@code {
    [Parameter] [EditorRequired] public string Title { get; set; } = null!;

    [Parameter] public string? Subtitle { get; set; } = null!;

    [Parameter] [EditorRequired] public string Author { get; set; } = null!;

    [Parameter] [EditorRequired] public DateTime Published { get; set; }

    [Parameter] public string[] Tags { get; set; } = null!;

    [Parameter] public bool HasPadding { get; set; }

    [Parameter] public TimeSpan? EstimatedTime { get; set; }
}